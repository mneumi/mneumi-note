## Docker镜像命令

### 拉取镜像[增]

| 命令                        | 说明                               |
| --------------------------- | ---------------------------------- |
| docker pull [镜像名:版本号] | 拉取镜像，版本号省略时为 `lastest` |

### 删除镜像[删]

| 命令                          | 说明                                             |
| ----------------------------- | ------------------------------------------------ |
| docker rmi [镜像名:版本号]    | 根据镜像名删除镜像，版本号省略时为 `lastest`     |
| docker rmi [镜像ID]           | 根据镜像ID删除镜像                               |
| docker rmi `docker images -q` | 组合命令，获取所有镜像ID，然后根据ID删除所有镜像 |

### 查询镜像[查]

| 命令                                   | 说明                               |
| -------------------------------------- | ---------------------------------- |
| docker images                          | 查看所有镜像信息列表               |
| docker images -q                       | 查看所有镜像ID列表                 |
| docker search [镜像名:版本号]          | 搜索镜像，版本号省略时为 `lastest` |
| docker inspect  [镜像名:版本号/镜像ID] | 查看镜像的详细信息                 |

### 打标签

| 命令                                      | 说明         |
| ----------------------------------------- | ------------ |
| docker tag 镜像名称:版本号/镜像ID tag名称 | 给镜像打标签 |

### 推送镜像

| 命令                      | 说明           |
| ------------------------- | -------------- |
| docker push 镜像名:版本号 | 推送镜像到仓库 |



## Docker容器命令

### 查看容器列表

| 命令            | 说明                                 | 简写          |
| --------------- | ------------------------------------ | ------------- |
| docker ps       | 查看正在运行的容器                   |               |
| docker ps -a    | 查看所有容器，包括已经停止的容器     |               |
| docker ps -q    | 查看正在运行的容器的ID               |               |
| docker ps -a -q | 查看所有容器的ID，包括已经停止的容器 | docker ps -aq |

### 创建并运行容器

```shell
docker run [参数列表] [初始化命令]
```

| 参数列表  | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| --name    | 指定容器名字，如果不指定将由系统随机生成                     |
| --restart | 重启策略，有下列值<br />no：默认策略，在容器退出时不重启容器<br />on-failure，在容器非正常退出时（退出状态非0），才会重启容器<br />on-failure:3，在容器非正常退出时重启容器，最多重启3次<br />always，在容器退出时总是重启容器<br />unless-stopped，容器退出时总是重启容器，但不考虑在Docker守护进程启动时就停止了的容器 |
| -i        | 保持容器运行                                                 |
| -t        | 以交互式创建容器                                             |
| -d        | 以守护进程形式创建容器                                       |
| -p        | 映射端口                                                     |
| -v        | 设置数据卷                                                   |
| -e        | 指定环境变量                                                 |

### 运行容器

| 命令                              | 说明                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| docker start 容器名:版本号/容器ID | `docker start`只能运行已经存在的容器，`docker run`能创建和运行容器，版本号省略时为 `lastest` |

### 停止容器

| 命令                             | 说明                     |
| -------------------------------- | ------------------------ |
| docker stop 容器名:版本号/容器ID | 版本号省略时为 `lastest` |

### 删除容器

| 命令                             | 说明                               |
| -------------------------------- | ---------------------------------- |
| docker rm 容器名称:版本号/容器ID | 删除容器，版本号省略时为 `lastest` |
| docker rm `docker ps -aq`        | 删除所有容器                       |

### 查看容器信息

| 命令                                  | 说明                     |
| ------------------------------------- | ------------------------ |
| docker inspect 容器名称:版本号/容器ID | 版本号省略时为 `lastest` |

### 进入容器

| 命令                                             | 说明               |
| ------------------------------------------------ | ------------------ |
| docker exec -it 容器名称:版本号/容器ID /bin/bash | 进入正在运行的容器 |



## tar文件命令

| 命令                                             | 说明                     |
| ------------------------------------------------ | ------------------------ |
| docker save -o 压缩文件名 容器名称:版本号/容器ID | 版本号省略时为 `lastest` |
| docker load -i 压缩文件名                        |                          |
